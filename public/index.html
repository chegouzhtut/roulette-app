<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Decision Roulette</title>
    <link rel="stylesheet" href="css/style.css">
    <script>
        // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–º—É —Å—Ä–∞–∑—É, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –º–∏–≥–∞–Ω–∏—è
        (function() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'light') {
                document.documentElement.classList.add('light-mode');
            }
        })();
    </script>
</head>
<body>
    <header class="app-header">
        <h1>üé∞ Decision Roulette</h1>
        <div class="header-actions">
            <button class="theme-toggle-btn" id="themeToggleBtn" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">üåì</button>
            <div class="user-section" id="userSection" style="display: none;">
                <span class="username" id="usernameDisplay"></span>
                <button class="logout-btn" id="logoutBtn" title="–í—ã–π—Ç–∏">üö™</button>
            </div>
            <button class="btn login-btn" id="loginBtn">–í–æ–π—Ç–∏</button>
            <button class="btn create-room-btn" id="createRoomBtn">–°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É</button>
        </div>
    </header>

    <div class="container">

        <div class="room-info" id="roomInfo" style="display: none;">
            <div class="room-code">
                <span>–ö–æ–¥ –∫–æ–º–Ω–∞—Ç—ã: <strong id="roomCode"></strong></span>
                <button class="btn copy-link-btn" id="copyLinkBtn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
            </div>
        </div>
        
        <div class="input-section">
            <div class="input-wrapper">
                <button class="btn collections-btn" id="collectionsBtn" style="display: none;" title="–ú–æ–∏ —Å–ø–∏—Å–∫–∏">
                    <span class="btn-icon">üìÇ</span>
                    <span class="btn-text">–ú–æ–∏ —Å–ø–∏—Å–∫–∏</span>
                </button>
                <input 
                    type="text" 
                    id="optionInput" 
                    placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç..."
                    autocomplete="off"
                >
                <button class="btn" id="addBtn">–î–æ–±–∞–≤–∏—Ç—å</button>
            </div>
        </div>

        <div class="presets-scroll-container" id="presetsContainer">
            <!-- –ü—Ä–µ—Å–µ—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ JS -->
        </div>

        <div class="options-section">
            <div class="options-header">
                <h3>–í–∞—Ä–∏–∞–Ω—Ç—ã</h3>
                <button class="clear-list-btn" id="clearListBtn" title="–û—á–∏—Å—Ç–∏—Ç—å —Å–ø–∏—Å–æ–∫">üóëÔ∏è</button>
            </div>
            <div class="options-list" id="optionsList">
                <div class="empty-message">–î–æ–±–∞–≤—å—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –¥–ª—è –≤—ã–±–æ—Ä–∞</div>
            </div>
        </div>

        <button class="btn spin-btn" id="spinBtn">üé≤ –ö—Ä—É—Ç–∏—Ç—å —Ä—É–ª–µ—Ç–∫—É!</button>

        <div class="history-section">
            <div class="history-header">
                <h2>–ò—Å—Ç–æ—Ä–∏—è –ø–æ–±–µ–¥</h2>
                <button class="clear-history-btn" id="clearHistoryBtn">–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é</button>
            </div>
            <div class="history-list" id="historyList">
                <div class="empty-message">–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞</div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
    <div class="modal-overlay" id="authModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h2>
                <button class="modal-close" id="closeAuthModal">√ó</button>
            </div>
            <div class="modal-tabs">
                <button class="tab-btn active" data-tab="login">–í—Ö–æ–¥</button>
                <button class="tab-btn" data-tab="register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
            </div>
            <div class="modal-body">
                <div class="tab-content active" id="loginTab">
                    <form id="loginForm">
                        <input type="text" id="loginUsername" placeholder="–õ–æ–≥–∏–Ω" required>
                        <input type="password" id="loginPassword" placeholder="–ü–∞—Ä–æ–ª—å" required>
                        <button type="submit" class="btn">–í–æ–π—Ç–∏</button>
                        <div class="error-message" id="loginError"></div>
                    </form>
                </div>
                <div class="tab-content" id="registerTab">
                    <form id="registerForm">
                        <input type="text" id="registerUsername" placeholder="–õ–æ–≥–∏–Ω" required>
                        <input type="password" id="registerPassword" placeholder="–ü–∞—Ä–æ–ª—å (–º–∏–Ω. 6 —Å–∏–º–≤–æ–ª–æ–≤)" required>
                        <button type="submit" class="btn">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                        <div class="error-message" id="registerError"></div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏ -->
    <div class="modal-overlay" id="saveCollectionModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–ù–∞–∑–æ–≤–∏ —Å–ø–∏—Å–æ–∫</h2>
                <button class="modal-close" id="closeSaveCollectionModal">√ó</button>
            </div>
            <div class="modal-body">
                <form id="saveCollectionForm">
                    <input type="text" id="collectionNameInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ..." required autofocus>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" id="cancelSaveCollection">–û—Ç–º–µ–Ω–∞</button>
                        <button type="submit" class="btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    </div>
                    <div class="error-message" id="saveCollectionError"></div>
                </form>
            </div>
        </div>
    </div>

    <!-- –ú–µ–Ω—é –∫–æ–ª–ª–µ–∫—Ü–∏–π -->
    <div class="collections-drawer" id="collectionsDrawer" style="display: none;">
        <div class="drawer-header">
            <h3>üìÇ –ú–æ–∏ –°–ø–∏—Å–∫–∏</h3>
            <button class="drawer-close" id="closeCollectionsDrawer">√ó</button>
        </div>
        <div class="drawer-body">
            <button class="btn save-collection-btn" id="saveCollectionBtn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Å–ø–∏—Å–æ–∫</button>
            <div class="collections-list" id="collectionsList">
                <div class="empty-message">–ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤</div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/collections.js"></script>
    <script src="js/script.js"></script>
</body>
</html>
